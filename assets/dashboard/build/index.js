(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wp.element,r=window.wp.apiFetch;var n=e.n(r);const s=()=>{const[e,r]=(0,a.useState)(!1),[s,l]=(0,a.useState)(null),[c,o]=(0,a.useState)({username:"",preset:"default",cacheDuration:43200,postsPerPage:"10"}),[i,m]=(0,a.useState)({});return(0,a.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{return await n()({path:"/nhrcc-core-contributions/v1/settings",method:"GET"})}catch(e){throw console.error("Error fetching settings:",e),e}})();o(e)}catch(e){l({type:"error",message:"Error loading settings"})}})()}),[]),(0,t.createElement)("div",{className:"nhrcc-core-contributions-settings-wrap"},(0,t.createElement)("h1",{className:"wp-heading-inline"},"Core Contributions Settings"),s&&(0,t.createElement)("div",{className:`notice notice-${"success"===s.type?"success":"error"} is-dismissible`},(0,t.createElement)("p",null,s.message),(0,t.createElement)("button",{type:"button",className:"notice-dismiss",onClick:()=>l(null)},(0,t.createElement)("span",{className:"screen-reader-text"},"Dismiss this notice"))),(0,t.createElement)("div",{className:"card"},(0,t.createElement)("h2",null,"User Settings"),(0,t.createElement)("p",{className:"description"},"Configure the default user and display preferences"),(0,t.createElement)("table",{className:"form-table"},(0,t.createElement)("tbody",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",{scope:"row"},(0,t.createElement)("label",{htmlFor:"username"},"Default WordPress.org Username")),(0,t.createElement)("td",null,(0,t.createElement)("input",{type:"text",id:"username",className:"regular-text",value:c?.username,onChange:e=>o({...c,username:e.target.value})}),i.username&&(0,t.createElement)("p",{className:"description error"},i.username),(0,t.createElement)("p",{className:"description"},"This username will be used when no specific user is provided")))))),(0,t.createElement)("div",{className:"card"},(0,t.createElement)("h2",null,"Cache Settings"),(0,t.createElement)("p",{className:"description"},"Manage how long contribution data is stored"),(0,t.createElement)("table",{className:"form-table"},(0,t.createElement)("tbody",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",{scope:"row"},(0,t.createElement)("label",{htmlFor:"cacheDuration"},"Cache Duration")),(0,t.createElement)("td",null,(0,t.createElement)("select",{id:"cacheDuration",value:c?.cacheDuration,onChange:e=>o({...c,cacheDuration:e.target.value})},(0,t.createElement)("option",{value:"1800"},"30 Minutes"),(0,t.createElement)("option",{value:"3600"},"1 Hour"),(0,t.createElement)("option",{value:"21600"},"6 Hour"),(0,t.createElement)("option",{value:"43200"},"12 Hour"),(0,t.createElement)("option",{value:"86400"},"24 Hours"))))))),(0,t.createElement)("div",{className:"card"},(0,t.createElement)("h2",null,"Display Settings"),(0,t.createElement)("p",{className:"description"},"Customize how contributions are displayed"),(0,t.createElement)("table",{className:"form-table"},(0,t.createElement)("tbody",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",{scope:"row"},(0,t.createElement)("label",{htmlFor:"preset"},"Preset")),(0,t.createElement)("td",null,(0,t.createElement)("select",{id:"preset",value:c?.preset,onChange:e=>o({...c,preset:e.target.value})},(0,t.createElement)("option",{value:"default"},"Default"),(0,t.createElement)("option",{value:"minimal"},"Minimal")))),(0,t.createElement)("tr",{className:"hidden"},(0,t.createElement)("th",{scope:"row"},(0,t.createElement)("label",{htmlFor:"postsPerPage"},"Posts Per Page")),(0,t.createElement)("td",null,(0,t.createElement)("input",{type:"number",id:"postsPerPage",className:"small-text",value:c?.postsPerPage,onChange:e=>o({...c,postsPerPage:e.target.value})}),i.postsPerPage&&(0,t.createElement)("p",{className:"description error"},i.postsPerPage)))))),(0,t.createElement)("p",{className:"submit"},(0,t.createElement)("button",{type:"button",className:"button button-primary",onClick:async()=>{if((()=>{const e={};return c.username.trim()||(e.username="Username is required"),m(e),0===Object.keys(e).length})()){r(!0);try{const e=await(async e=>{try{return await n()({path:"/nhrcc-core-contributions/v1/settings",method:"POST",data:e})}catch(e){throw console.error("Error updating settings:",e),e}})(c);l({type:"success",message:e.message})}catch(e){l({type:"error",message:"Error saving settings. Please try again later."})}finally{r(!1)}}},disabled:e},e?"Saving...":"Save Changes")))},l=()=>{const e=document.getElementById("nhrcc-admin-settings");e&&(0,a.createRoot)(e).render((0,t.createElement)(s,null))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()})();