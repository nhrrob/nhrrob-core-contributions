(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var r in t)e.o(t,r)&&!e.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:t[r]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.element,t=window.wp.apiFetch;var r=e.n(t);const n=window.ReactJSXRuntime,a=()=>{const[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null),[c,l]=(0,s.useState)({username:"",preset:"default",cacheDuration:43200,postsPerPage:"10"}),[o,d]=(0,s.useState)({});return(0,s.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{return await r()({path:"/nhrcc-core-contributions/v1/settings",method:"GET"})}catch(e){throw console.error("Error fetching settings:",e),e}})();l(e)}catch(e){i({type:"error",message:"Error loading settings"})}})()}),[]),(0,n.jsxs)("div",{className:"nhrcc-core-contributions-settings-wrap",children:[(0,n.jsx)("h1",{className:"wp-heading-inline",children:"Core Contributions Settings"}),a&&(0,n.jsxs)("div",{className:`notice notice-${"success"===a.type?"success":"error"} is-dismissible`,children:[(0,n.jsx)("p",{children:a.message}),(0,n.jsx)("button",{type:"button",className:"notice-dismiss",onClick:()=>i(null),children:(0,n.jsx)("span",{className:"screen-reader-text",children:"Dismiss this notice"})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{children:"User Settings"}),(0,n.jsx)("p",{className:"description",children:"Configure the default user and display preferences"}),(0,n.jsx)("table",{className:"form-table",children:(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"row",children:(0,n.jsx)("label",{htmlFor:"username",children:"Default WordPress.org Username"})}),(0,n.jsxs)("td",{children:[(0,n.jsx)("input",{type:"text",id:"username",className:"regular-text",value:c?.username,onChange:e=>l({...c,username:e.target.value})}),o.username&&(0,n.jsx)("p",{className:"description error",children:o.username}),(0,n.jsx)("p",{className:"description",children:"This username will be used when no specific user is provided"})]})]})})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{children:"Cache Settings"}),(0,n.jsx)("p",{className:"description",children:"Manage how long contribution data is stored"}),(0,n.jsx)("table",{className:"form-table",children:(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"row",children:(0,n.jsx)("label",{htmlFor:"cacheDuration",children:"Cache Duration"})}),(0,n.jsx)("td",{children:(0,n.jsxs)("select",{id:"cacheDuration",value:c?.cacheDuration,onChange:e=>l({...c,cacheDuration:e.target.value}),children:[(0,n.jsx)("option",{value:"1800",children:"30 Minutes"}),(0,n.jsx)("option",{value:"3600",children:"1 Hour"}),(0,n.jsx)("option",{value:"21600",children:"6 Hour"}),(0,n.jsx)("option",{value:"43200",children:"12 Hour"}),(0,n.jsx)("option",{value:"86400",children:"24 Hours"})]})})]})})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{children:"Display Settings"}),(0,n.jsx)("p",{className:"description",children:"Customize how contributions are displayed"}),(0,n.jsx)("table",{className:"form-table",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"row",children:(0,n.jsx)("label",{htmlFor:"preset",children:"Preset"})}),(0,n.jsx)("td",{children:(0,n.jsxs)("select",{id:"preset",value:c?.preset,onChange:e=>l({...c,preset:e.target.value}),children:[(0,n.jsx)("option",{value:"default",children:"Default"}),(0,n.jsx)("option",{value:"minimal",children:"Minimal"})]})})]}),(0,n.jsxs)("tr",{className:"hidden",children:[(0,n.jsx)("th",{scope:"row",children:(0,n.jsx)("label",{htmlFor:"postsPerPage",children:"Posts Per Page"})}),(0,n.jsxs)("td",{children:[(0,n.jsx)("input",{type:"number",id:"postsPerPage",className:"small-text",value:c?.postsPerPage,onChange:e=>l({...c,postsPerPage:e.target.value})}),o.postsPerPage&&(0,n.jsx)("p",{className:"description error",children:o.postsPerPage})]})]})]})})]}),(0,n.jsx)("p",{className:"submit",children:(0,n.jsx)("button",{type:"button",className:"button button-primary",onClick:async()=>{if((()=>{const e={};return c.username.trim()||(e.username="Username is required"),d(e),0===Object.keys(e).length})()){t(!0);try{const e=await(async e=>{try{return await r()({path:"/nhrcc-core-contributions/v1/settings",method:"POST",data:e})}catch(e){throw console.error("Error updating settings:",e),e}})(c);i({type:"success",message:e.message})}catch(e){i({type:"error",message:"Error saving settings. Please try again later."})}finally{t(!1)}}},disabled:e,children:e?"Saving...":"Save Changes"})})]})},i=()=>{const e=document.getElementById("nhrcc-admin-settings");e&&(0,s.createRoot)(e).render((0,n.jsx)(a,{}))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()})();