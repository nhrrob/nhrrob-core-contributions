(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,r=window.wp.blockEditor,n=window.wp.components,o=window.wp.element,s=window.wp.apiFetch;var a=e.n(s);const i=JSON.parse('{"UU":"nhrcc-core-contributions/core-contributions-block"}'),l=window.ReactJSXRuntime;(0,t.registerBlockType)(i.UU,{attributes:{username:{type:"string",default:""},preset:{type:"string",default:"default"}},supports:{html:!1,reusable:!0,align:!0},edit:function({attributes:e,setAttributes:t}){const s=(0,r.useBlockProps)(),[i,d]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1),w=(0,o.useRef)(function(){let e;return(...r)=>{clearTimeout(e),e=setTimeout((()=>(e=>{t({username:e})})(...r)),500)}}()).current;return(0,o.useEffect)((()=>{e.username?(m(!0),async function({username:e,preset:t}){try{return(await a()({path:"/nhrcc-core-contributions/v1/core-contributions/render",method:"POST",data:{username:e,preset:t}})).content||""}catch(e){throw console.error("Failed to fetch preview:",e),new Error("Failed to load preview")}}(e).then(d).catch((e=>{console.error("Failed to load preview:",e),d(`Error: ${e.message}`)})).finally((()=>m(!1)))):d("")}),[e.username,e.preset]),(0,l.jsxs)("div",{...s,children:[(0,l.jsx)(r.InspectorControls,{children:(0,l.jsxs)(n.PanelBody,{title:"Core Contributions Settings",children:[(0,l.jsx)(n.TextControl,{label:"WordPress.org Username",value:e.username,onChange:w,help:"Enter your WordPress.org username to display contributions"}),(0,l.jsx)(n.SelectControl,{label:"Design Style",value:e.preset,options:c,onChange:e=>t({preset:e})})]})}),(0,l.jsx)(u,{isLoading:p,username:e.username,content:i})]})},save:()=>null});const c=[{label:"Default",value:"default"},{label:"Minimal",value:"minimal"}];function u({isLoading:e,username:t,content:r}){return e?(0,l.jsx)(n.Spinner,{}):t?(0,l.jsx)("div",{className:"nhr-core-contributions-preview",dangerouslySetInnerHTML:{__html:r}}):(0,l.jsx)("div",{className:"components-placeholder",children:(0,l.jsx)("p",{children:"Please set a WordPress.org username to preview the contributions."})})}})();