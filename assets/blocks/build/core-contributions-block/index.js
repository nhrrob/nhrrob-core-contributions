(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.blocks,n=window.wp.blockEditor,t=window.wp.components,o=window.wp.element,s=window.wp.apiFetch;var i=e.n(s);const a=JSON.parse('{"UU":"nhrcc-core-contributions/core-contributions-block"}'),c=window.ReactJSXRuntime;(0,r.registerBlockType)(a.UU,{edit:function({attributes:e,setAttributes:r}){const s=(0,n.useBlockProps)(),[a,d]=(0,o.useState)(e.username),[p,m]=(0,o.useState)(""),[h,b]=(0,o.useState)(!1),w=(0,o.useRef)(function(){let e;return(...n)=>{clearTimeout(e),e=setTimeout((()=>(e=>{r({username:e})})(...n)),500)}}()).current;return(0,o.useEffect)((()=>{e.username||r({username:nhrccCoreContributionsCommonObj?.nhrccSettings?.username||"",preset:nhrccCoreContributionsCommonObj?.nhrccSettings?.preset||"default"})}),[]),(0,o.useEffect)((()=>{e.username?(b(!0),async function(e){try{return(await i()({path:"/nhrcc-core-contributions/v1/core-contributions/render",method:"POST",data:e})).content||""}catch(e){throw console.error("Failed to fetch preview:",e),new Error("Failed to load preview")}}(e).then(m).catch((e=>{console.error("Failed to load preview:",e),m(`Error: ${e.message}`)})).finally((()=>b(!1)))):m("")}),[e.username,e.preset,e.backgroundColor,e.textColor,e.linkColor,e.borderColor,e.borderRadius,e.padding,e.margin,e.fontSize,e.fontWeight]),(0,c.jsxs)("div",{...s,children:[(0,c.jsx)(n.InspectorControls,{children:(0,c.jsxs)(t.PanelBody,{title:"Core Contributions Settings",children:[(0,c.jsx)(t.TextControl,{label:"WordPress.org Username",value:a,onChange:e=>{d(e),w(e)},help:"Enter your WordPress.org username to display contributions"}),(0,c.jsx)(t.SelectControl,{label:"Design Style",value:e.preset,options:l,onChange:e=>r({preset:e})})]})}),(0,c.jsx)(u,{isLoading:h,username:e.username,content:p})]})},save:()=>null});const l=[{label:"Default",value:"default"},{label:"Minimal",value:"minimal"}];function u({isLoading:e,username:r,content:n}){return e?(0,c.jsx)(t.Spinner,{}):r?(0,c.jsx)("div",{className:"nhr-core-contributions-preview",dangerouslySetInnerHTML:{__html:n}}):(0,c.jsx)("div",{className:"components-placeholder",children:(0,c.jsx)("p",{children:"Please set a WordPress.org username to preview the contributions."})})}})();