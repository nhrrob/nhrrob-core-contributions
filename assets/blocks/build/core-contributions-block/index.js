(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.blocks,t=window.wp.blockEditor,n=window.wp.components,o=window.wp.element,s=window.wp.apiFetch;var i=e.n(s);const a=JSON.parse('{"UU":"nhrcc-core-contributions/core-contributions-block"}'),c=window.ReactJSXRuntime;(0,r.registerBlockType)(a.UU,{edit:function({attributes:e,setAttributes:r}){const s=(0,t.useBlockProps)(),[a,d]=(0,o.useState)(e.username),[p,m]=(0,o.useState)(""),[h,w]=(0,o.useState)(!1),b=(0,o.useRef)(function(){let e;return(...t)=>{clearTimeout(e),e=setTimeout((()=>(e=>{r({username:e})})(...t)),500)}}()).current;return(0,o.useEffect)((()=>{e.username||r({username:nhrccCoreContributionsCommonObj?.nhrccSettings?.username||"",preset:nhrccCoreContributionsCommonObj?.nhrccSettings?.preset||"default"})}),[]),(0,o.useEffect)((()=>{e.username?(w(!0),async function({username:e,preset:r}){try{return(await i()({path:"/nhrcc-core-contributions/v1/core-contributions/render",method:"POST",data:{username:e,preset:r}})).content||""}catch(e){throw console.error("Failed to fetch preview:",e),new Error("Failed to load preview")}}(e).then(m).catch((e=>{console.error("Failed to load preview:",e),m(`Error: ${e.message}`)})).finally((()=>w(!1)))):m("")}),[e.username,e.preset]),(0,c.jsxs)("div",{...s,children:[(0,c.jsx)(t.InspectorControls,{children:(0,c.jsxs)(n.PanelBody,{title:"Core Contributions Settings",children:[(0,c.jsx)(n.TextControl,{label:"WordPress.org Username",value:a,onChange:e=>{d(e),b(e)},help:"Enter your WordPress.org username to display contributions"}),(0,c.jsx)(n.SelectControl,{label:"Design Style",value:e.preset,options:l,onChange:e=>r({preset:e})})]})}),(0,c.jsx)(u,{isLoading:h,username:e.username,content:p})]})},save:()=>null});const l=[{label:"Default",value:"default"},{label:"Minimal",value:"minimal"}];function u({isLoading:e,username:r,content:t}){return e?(0,c.jsx)(n.Spinner,{}):r?(0,c.jsx)("div",{className:"nhr-core-contributions-preview",dangerouslySetInnerHTML:{__html:t}}):(0,c.jsx)("div",{className:"components-placeholder",children:(0,c.jsx)("p",{children:"Please set a WordPress.org username to preview the contributions."})})}})();